<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Przydział do stołów</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      overflow-x: hidden;
      font-family: Arial, sans-serif;
    }

    body {
      text-align: center;
      background-image: url('tlo.jpg');
      background-size: cover;
      background-position: center center;
      background-repeat: no-repeat;
      background-attachment: fixed;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      box-sizing: border-box;
      padding: 50px 20px;
    }

    .logo {
      width: 250px;
      margin-top: 120px;
      opacity: 0.7;
    }

    .input-group {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 45px;
      width: 100%;
      max-width: 350px;
    }

    input {
      padding: 14px;
      font-size: 16px;
      flex-grow: 1;
      border: 2px solid #fff;
      border-radius: 4px 0 0 4px;
      outline: none;
      background-color: rgba(255, 255, 255, 0.9);
      color: #000;
      font-weight: bold;
      transition: box-shadow 0.3s ease, border-color 0.3s ease;
    }

    input:focus {
      border-color: #daa520;
      box-shadow: 0 0 10px 3px rgba(218, 165, 32, 0.8);
      background-color: #fff;
    }

    button {
      width: 48px;
      height: 48px;
      font-size: 20px;
      margin-left: 0;
      cursor: pointer;
      border: none;
      border-radius: 0 4px 4px 0;
      background-color: #444;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 0;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #666;
    }

    #result {
      margin-top: 30px;
      font-size: 20px;
      font-weight: bold;
      color: #000;
      background-color: rgba(255, 255, 255, 0.8);
      padding: 15px 20px;
      border-radius: 8px;
      max-width: 90%;
      word-wrap: break-word;
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.5s ease, transform 0.5s ease;
      position: relative;
    }

    #result.show {
      opacity: 1;
      transform: translateY(0);
    }

    .table-image {
      width: 100px;
      margin-top: 20px;
    }

  /* Julia Kot gold buttons - eleganckie i stonowane */
.julia-group-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  margin-top: 30px;
  gap: 20px;
}

.julia-group-button {
  background-color: #d4af37; /* stonowane złoto */
  color: black;
  font-family: Arial, sans-serif;
  font-size: 18px; /* troszkę mniejsze napisy */
  font-weight: bold;
  padding: 40px 50px; /* większe kwadraty */
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
}

.julia-group-button:hover {
  transform: scale(1.05);
  box-shadow: 0 0 20px rgba(212, 175, 55, 0.8);
}

    @media (max-width: 480px) {
      input {
        padding: 12px;
        font-size: 16px;
      }
      button {
        width: 40px;
        height: 40px;
        font-size: 18px;
      }
      .logo {
        width: 180px;
        margin-top: 80px;
      }
    }
  </style>
</head>
<body>

  <img src="logo.png" alt="Logo imprezy" class="logo" />

  <div class="input-group">
    <input type="text" id="guestName" placeholder="Imię i nazwisko" autocomplete="off" aria-label="Wpisz imię i nazwisko" />
    <button onclick="findTable()" aria-label="Szukaj">🔍</button>
  </div>

  <div id="result" aria-live="polite" role="alert"></div>

  <script>
   const guests = {
  "Martyna Dec": 1,
  "Wiktoria Duda": 1,
  "Damian Dubiel": 1,
  "Yelyzaveta Kotniuk": 1,
  "Maciej Kolasa": 1,
  "Filip Kuca": 1,
  "Mateusz Gawiński": 1,
  "Szymon Kurus": 1,
  "Kacper Kraśnik": 1,
  "Piotr Kuchciak": 1,
  "Agata Dusza": 1,
  "Mikołaj Dyrka": 1,
  "Zofia Marcula": 1,
  "Aleksandra Dembicka": 1,
  "Tymoteusz Czukiewski": 1,

  "Jan Szczerba": 2,
  "Filip Szczepanek": 2,
  "Aleksandra Tarka": 2,
  "Maciej Pelc": 2,
  "Oliwia Stasiewicz": 2,
  "Julia Dąbrowska": 2,
  "Melania Bojar": 2,
  "Wiktor Patyra": 2,
  "Mateusz Suszek": 2,
  "Dominika Osińska": 2,
  "Aleksandra Skarzyńska": 2,
  "Joanna Szpala": 2,
  "Iga Szkałuba": 2,
  "Maja Tkaczyk": 2,
  "Aleksandra Szubarczyk": 2,
  "Agnieszka Śmiech": 2,

  "Maja Antoniuk": 3,
  "Marta Adamczyk": 3,
  "Dawid Bara": 3,
  "Bartosz Baran": 3,
  "Alicja Sochocka": 3,
  "Karol Sowa": 3,
  "Adam Małkiewicz": 3,
  "Emilia Listos": 3,
  "Anastazja Lisek": 3,
  "Weronika Serwatka": 3,
  "Martyna Markowska": 3,
  "Jan Przywała": 3,
  "Dawid Bąk": 3,
  "Jakub Banaszek": 3,
  "Kinga Barańska": 3,
  "Jan Żołnowski": 3,

  "Milena Krupa": 4,
  "Karol Kraska": 4,
  "Magdalena Kowalczyk": 4,
  "Paulina Kozłowska": 4,
  "Weronika Źrodowska": 4,
  "Jakub Żebrowski": 4,
  "Anna Guzy": 4,
  "Edyta Drygaś": 4,
  "Angelika Łazańska": 4,
  "Julia Płoszczyca": 4,
  "Magdalena Roszczenko": 4,
  "Marcjanna Pruchniak": 4,
  "Kamil Rumiński": 4,
  "Jakub Kuśmierczyk": 4,
  "Alicja Pudelska": 4,
  "Kacper Grzegorczyk": 4,
  "Karolina Rusek": 4,
  "Kamila Sus": 4,
  "Lilianna Czopińska": 4,
  "Michał Krzowski": 4,
  "Barbara Rojek": 4,

  "Jan Poleszak": 5,
  "Katarzyna Ostrowska": 5,
  "Paulina Wesołowska": 5,
  "Tobiasz Wróblewski": 5,
  "Stanisław Zbita": 5,
  "Wiktor Wolniaczyk": 5,
  "Maria Woś": 5,
  "Anna Wyjadłowska": 5,
  "Andrii Molodets": 5,
  "Maksym Purdenko": 5,
  "Julia Wojda": 5,
  "Aleksandra Wojtanowicz": 5,
  "Aleksandra Makarewicz": 5,
  "Marcel Wilim": 5,
  "Bartosz Wiewiórka": 5,
  "Jakub Wilczopolski": 5,
  "Łukasz Wiatr": 5,
  "Jan Umiński": 5,

  "Miłosz Badach": 6,
  "Igor Kusio": 6,
  "Wiktoria Krowisz": 6,
  "Patryk Guziak": 6,
  "Monika Sewera": 6,
  "Gabriela Worotyłko": 6,
  "Agnieszka Kapusta": 6,
  "Natalia Sędzik": 6,
  "Kornelia Kursa": 6,
  "Magdalena Kosarzycka": 6,
  "Weronika Kojtych": 6,
  "Patrycja Kmiecik": 6,
  "Wiktor Kaliciński": 6,
  "Anna Kisielewska": 6,
  "Natalia Sokół": 6,
  "Olga Wojdyga": 6,
  "Julia Kępowicz": 6,
  "Dominika Leżucha": 6,
  "Wiktoria Klementewicz": 6,
  "Angelika Kita": 6,
  "Wiktoria Kawalec": 6,
  "Julia Kot": 6,
  "Martyna Klin": 6,
  "Julia Wójcik": 6,

  "Anna Piechowska": 7,
  "Dominika Małek": 7,
  "Aleksandra Pietrzak": 7,
  "Jowita Pluta": 7,
  "Julia Płaza-Kościańczuk": 7,
  "Zuzanna Sudewicz": 7,
  "Filip Pogoda": 7,
  "Bartłomiej Pawlonka": 7,
  "Maciej Onyśk": 7,
  "Błażej Otłowski": 7,
  "Piotr Stasiak": 7,
  "Krzysztof Suraj": 7,
  "Wiktoria Stróż": 7,
  "Izabela Strąk": 7,
  "Mikołaj Czerwonka": 7,
  "Michał Iwaszko": 7,
  "Piotr Szabat": 7,
  "Anna Suska": 7,
  "Marcel Polański": 7,
  "Zuzanna Stochmal": 7,
  "Kinga Syrkiewicz": 7,
  "Angelika Imasz": 7,
  "Jakub Kacprzyk": 7,
  "Kamil Jucha": 7,
  "Michał Juszczuk": 7,
  "Norbert Jurjew": 7,
  "Tomasz Jankowski": 7,

  "Mikołaj Brzusek": 8,
  "Kasjana Budzałek": 8,
  "Antonina Budzyń": 8,
  "Martyna Bursztyka": 8,
  "Alan Głodek": 8,
  "Aleksandra Górska": 8,
  "Aleksandra Zaręba": 8,
  "Julia Kaczorowska": 8,
  "Julia Grasza": 8,
  "Wojciech Bogaczewicz": 8,
  "Katarzyna Czopek": 8,
  "Weronika Romaniuk": 8,
  "Aleksandra Starzycka": 8,
  "Julia Winiarska": 8,
  "Jakub Koman": 8,
  "Julia Kot": 8,
  "Julia Kręblaś": 8,
  "Marta Pawluczuk": 8,
  "Laura Piaseczna": 8,
  "Wiktoria Walentyn": 8,
  "Katarzyna Jamrozik": 8,
  "Alicja Kalisz": 8,
  "Julia Świniarska": 8,
  "Justyna Turczak": 8,
  "Jakub Zieliński": 8,

  "Zuzanna Bolek": 9,
  "Jakub Boboń": 9,
  "Izabela Bogucka": 9,
  "Nikola Sobecka": 9,
  "Karolina Suchecka": 9,
  "Maja Chodór": 9,
  "Oliwia Malec": 9,
  "Filip Kozłowski": 9,
  "Paula Weremczuk": 9,
  "Weronika Zmysłowska": 9,
  "Dawid Czarnacki": 9,
  "Dominika Ciesielska": 9,
  "Alicja Czajka": 9,
  "Angelika Cięszczyk": 9,
  "Magdalena Młynarczyk": 9,
  "Jan Ciesielczyk": 9,
  "Anna Banaś": 9,
  "Jakub Czmok": 9,
  "Michał Chojęta": 9,
  "Mateusz Czech": 9,
  "Franciszek Czerwiński": 9,
  "Gabriela Nowak": 9,
  "Aleksandra Nowak": 9,
  "Tomasz Nowosielski": 9,
  "Zofia Nurek": 9,
  "Kaja Musiał": 9,
  "Amelia Michaluk": 9,

  "Mateusz Wunderlich": 10,
  "Maja Troszczyńska": 10,
  "Joanna Wilińska": 10,
  "Apolonia Węgrzyn": 10,
  "Oliwia Wajda": 10,
  "Kinga Wilczyńska": 10,
  "Magdalena Zwierzchowska": 10,
  "Karolina Zygarowicz": 10,
  "Kvitoslava Lukovych": 10,
  "Tomasz Zdon": 10,
  "Aleksandra Ziomek": 10,
  "Julia Wysmulska": 10,
  "Barbara Mincewicz": 10,
  "Gabriela Stanisławek": 10,
  "Ada Galant": 10,
  "Paulina Lotko": 10,
  "Wojciech Łuczko": 10,
  "Anna Majerska": 10,
  "Marta Marczewska": 10,
  "Maja Machulak": 10,
  "Stanisław Marczuk": 10,
  "Małgorzata Kuca": 10,
  "Wiktor Makara": 10,
  "Aleksandra Olszyńska": 10,
  "Łucja Nogaj": 10,
  "Kacper Odziemek": 10,
  "Michał Niewęgłowski": 10,
  "Iga Nazaruk": 10,
  "Karolina Niedziela": 10,

  "Paweł Baranowski": 11,
  "Wiktoria Mazur": 11,
  "Paulina Marek": 11,
  "Alicja Maj": 11,
  "Tomasz Lis": 11,
  "Aleksandra Kusaj": 11,
  "Roksana Lejk": 11,
  "Karolina Michalik": 11,
  "Jakub Lesiczka": 11,
  "Jakub Bereś": 11,
  "Michał Flis": 11,
  "Szymon Flis": 11,
  "Paweł Flis": 11,
  "Grzegorz Dziedzic": 11,
  "Weronika Schild": 11,
  "Marcin Oklejewicz": 11,
  "Agata Gierach-Upton": 11,
  "Agata Gierach": 11,
  "Anna Gil": 11,
  "Weronika Falkowska": 11,
  "Monika Filar": 11,
  "Szymon Folusz": 11,
  "Anna Kuraś": 11,
  "Karina Kubaszewska": 11,
  "Weronika Krupa": 11,
  "Kamila Krzpiot": 11,
  "Adam Młodawski": 11,
  "Jakub Moskal": 11,
  "Kacper Mucha": 11,

  "Michalina Miszczuk": 12,
  "Alicja Mastej": 12,
  "Dominika Mech": 12,
  "Małgorzata Sikora": 12,
  "Monika Moskal": 12,
  "Paulina Dziuba": 12,
  "Jagoda Długosz": 12,
  "Paulina Lewczuk": 12,
  "Weronika Druzik": 12,
  "Jolanta Sado": 12,
  "Piotr Siwiec": 12,
  "Oliwer Goździk": 12,
  "Jakub Rybak": 12,
  "Miłosz Smyk": 12,
  "Dominika Skarbek": 12,
  "Justyna Sagan": 12,
  "Maja Siekierka": 12,
  "Aleksandra Sapiaszko": 12,
  "Aleksandra Siczek": 12,
  "Oliwia Sidło": 12,
  "Oliwia Ostrowska": 12,
  "Karolina Kubajka": 12,
  "Aleksandra Skrzyniarz": 12,
  "Aleksandra Zynkowska": 12,
  "Maja Salamon": 12,

  "Kinga Mirosław": 13,
  "Joanna Murawska": 13,
  "Natalia Leszczyńska": 13,
  "Weronika Filipowicz": 13,
  "Julia Gołąbek": 13,
  "Maria Gruszecka": 13,
  "Agata Hotloś": 13,
  "Patrycja Januszko": 13,
  "Daria Imgrond": 13,
  "Ada Jaworska": 13,
  "Igor Chamulak": 13,
  "Wiktoria Szczepanik": 13,

  "Martyna Bartoszczyk": 14,
  "Maciej Biskupski": 14,
  "Maja Błońska": 14,
  "Zuzanna Betiuk": 14,
  "Natalia Fidut": 14,
  "Gabriela Klonowska": 14,
  "Kinga Bielarska": 14,
  "Oliwia Beznosik": 14,
  "Aleksandra Bień": 14,
  "Szymon Bielecki": 14,
  "Martyna Błażyca": 14,

  "Agata Chapska": 15,
  "Julia Gutowska": 15,
  "Maksym Jęczeń": 15,
  "Julia Kosiek": 15,
  "Olaf Kotlarz": 15,
  "Daniel Leśniak": 15,
  "Antoni Chmiel": 15,
  "Mikołaj Chmielecki": 15,
  "Jakub Czuhan": 15,
  "Karolina Dziubdzińska": 15,
  "Aleksander Giermasiński": 15,
  "Aleksandra Gałan": 15,
  "Izabela Szpejankowska": 15,
  "Zofia Godzisz": 15,
  "Bernadeta Banaszczyk": 15,
  "Oliwier Bułdak": 15,
  "Małgorzata Świąder": 15,

  "Jakub Barczuk": 16,
  "Bartłomiej Goch": 16,
  "Maciej Stworowski": 16,
  "Maciej Szkodziak": 16,
  "Małgorzata Szwedo": 16,
  "Piotr Wolicki": 16,
  "Magdalena Grzywacz": 16,
  "Marietta Milas": 16,
  "Maria Obszańska": 16,
  "Aleksandra Piskulak": 16,
  "Aleksandra Samborska": 16,
  "Iga Mazur": 16,
  "Maja Pawłowska": 16,
  "Wojciech Skuza": 16,
  "Julia Leszek": 16,
  "Katarzyna Mądry": 16,
  "Agnieszka Orzeł": 16,
  "Aleksandra Pacek": 16,
  "Karolina Paterek": 16,
  "Magdalena Rejman": 16
}; 

      


    const nicknameMap = {
      "ola": "aleksandra",
      "aleks": "aleksandra",
      "sandra": "aleksandra",
      "alutka": "aleksandra",
      "matek": "mateusz",
      "mati": "mateusz",
      "iza": "izabela",
      "zuzia": "zuzanna",
      "zuzka": "zuzanna",
      "ala": "alicja",
      "kasia": "katarzyna",
      "kacha": "katarzyna",
      "basia": "barbara",
      "gosia": "małgorzata",
      "małgosia": "małgorzata",
      "asia": "joanna",
      "joasia": "joanna",
      "bartek": "bartosz",
      "piotruś": "piotr",
      "krzyś": "krzysztof",
      "Maciek": "Maciej",
      "Oliwka": "Oliwia",
      "Kuba": "Jakub",
      "Paula": "Paulina",
      "Wojtek": "Wojciech",
      "Wera": "Weronika",
      "Ala": "Alicja",
      "Ania": "Anna",
      "Zosia": "Zofia",
      "Tomek": "Tomasz",
      "Pola": "Apolonia",
      "Magda": "Magdalena",
      "Madzia": "Magdalena",
      "Kvitka": "Kvitoslava",
      "Gabrysia": "Gabriela",
      "Jola": "Jolanta",
      "Michasia": "Michalina",
      "Marysia": "Maria",
      "Janek": "Jan",
      "Stasiek": "Stanisław",
      "Tymek": "Tymoteusz",
      "Grzesiek": "Grzegorz",
      "Emilka": "Emilia",
      "Mela": "Melania",
      "Aga": "Agnieszka",
      "Antek": "Antoni",
      "Franek": "Franciszek",
      "Remek": "Remigiusz"
    };

  const juliaKotData = [
      { table: 6, group: 33 },
      { table: 8, group: 102 },
      { table: 12, group: 88 }
    ];

    function normalizeName(str) {
      return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase();
    }

    function mapNicknameToFull(name) {
      return nicknameMap[name] || name;
    }

    function levenshtein(a, b) {
      const matrix = [];
      for (let i = 0; i <= b.length; i++) matrix[i] = [i];
      for (let j = 0; j <= a.length; j++) matrix[0][j] = j;
      for (let i = 1; i <= b.length; i++) {
        for (let j = 1; j <= a.length; j++) {
          if (b.charAt(i-1) === a.charAt(j-1)) {
            matrix[i][j] = matrix[i-1][j-1];
          } else {
            matrix[i][j] = Math.min(matrix[i-1][j-1]+1, matrix[i][j-1]+1, matrix[i-1][j]+1);
          }
        }
      }
      return matrix[b.length][a.length];
    }

    function showJuliaKotTable(table, group) {
      showResult(`Witaj, <strong>Julia Kot</strong>!<br>Twój stół to numer <strong>${table}</strong>.<br>
                  <img src="stol.png" alt="Stół" class="table-image">`);
    }

    function findTable() {
      const input = document.getElementById('guestName');
      const rawInput = input.value.trim();
      const nameInput = normalizeName(rawInput);
      const resultDiv = document.getElementById('result');

      input.blur();

      if (!nameInput) {
        showResult("Proszę wpisać imię i nazwisko lub nazwisko.");
        return;
      }

      if (nameInput === "julia kot") {
        let html = `<div class="julia-group-container">`;
        juliaKotData.forEach(entry => {
          html += `<button class="julia-group-button" 
                       onclick="showJuliaKotTable(${entry.table}, ${entry.group})">
                       Grupa ${entry.group}
                   </button>`;
        });
        html += `</div>`;
        resultDiv.innerHTML = html;
        resultDiv.classList.add('show');
        return;
      }

      const inputWords = nameInput.split(/\s+/).filter(Boolean);

      if (inputWords.length === 1) {
        const lastName = inputWords[0];
        const matches = [];

        for (const [name, table] of Object.entries(guests)) {
          const normalizedFull = normalizeName(name);
          const parts = normalizedFull.split(" ");
          if (parts.length < 2) continue;
          const fullLast = parts[1];
          const distance = levenshtein(fullLast, lastName);
          if (distance <= 2) matches.push([name, table, distance]);
        }

        if (matches.length === 1) {
          const [foundName, foundTable] = matches[0];
          showResult(`Witaj, <strong>${foundName}</strong>! Twój stół to numer <strong>${foundTable}</strong>.<br>
            <img src="stol.png" alt="Stół" class="table-image">`);
          return;
        } else if (matches.length > 1) {
          showResult("Znaleziono kilka osób o tym nazwisku. Proszę podać imię i nazwisko.");
          return;
        } else {
          showResult("Nie znaleziono gościa o podanym nazwisku.");
          return;
        }
      }

      if (inputWords.length >= 2) {
        let [inputFirst, inputLast] = inputWords;
        inputFirst = mapNicknameToFull(inputFirst);

        for (const [name, table] of Object.entries(guests)) {
          const normalizedFull = normalizeName(name);
          const [fullFirst, fullLast] = normalizedFull.split(" ");
          if (mapNicknameToFull(fullFirst) === inputFirst && fullLast === inputLast) {
            showResult(`Witaj, <strong>${name}</strong>! Twój stół to numer <strong>${table}</strong>.<br>
              <img src="stol.png" alt="Stół" class="table-image">`);
            return;
          }
        }

        let bestMatch = null;
        let bestScore = Infinity;

        for (const [name, table] of Object.entries(guests)) {
          const normalizedName = normalizeName(name);
          const nameParts = normalizedName.split(/\s+/);
          if (nameParts.length < 2) continue;
          let [first, last] = nameParts;
          first = mapNicknameToFull(first);
          const firstDistance = levenshtein(first, inputFirst);
          const lastDistance = levenshtein(last, inputLast);
          const weightedScore = firstDistance * 1 + lastDistance * 2;

          if (weightedScore < bestScore) {
            bestScore = weightedScore;
            bestMatch = [name, table];
          }
        }

        if (bestMatch && bestScore <= 4) {
          showResult(`Witaj, <strong>${bestMatch[0]}</strong>! Twój stół to numer <strong>${bestMatch[1]}</strong>.<br>
            <img src="stol.png" alt="Stół" class="table-image">`);
        } else {
          showResult("Nie znaleziono gościa o podanym imieniu i nazwisku.");
        }
      }
    }

    function showResult(html) {
      const resultDiv = document.getElementById('result');
      resultDiv.innerHTML = html;
      resultDiv.classList.add('show');
      setTimeout(() => resultDiv.classList.remove('show'), 8000);
    }

    document.getElementById("guestName").addEventListener("keypress", function(event) {
      if (event.key === "Enter") findTable();
    });
  </script>
</body>
</html>




